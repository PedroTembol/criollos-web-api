#!/usr/bin/env bash
set -euo pipefail

STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|ts|vue|json|md|css|yml|yaml)$' || true)

if [ -z "$STAGED_FILES" ]; then
  echo "âœ… No files to format"
  exit 0
fi

echo "ðŸŽ¨ Running Prettier on staged files..."
echo "$STAGED_FILES" | xargs bunx prettier --write

echo "$STAGED_FILES" | xargs git add

echo "âœ… Pre-commit formatting complete"
